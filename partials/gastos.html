<!-- partials/gastos.html -->
<section id="gastos" class="tab-content">
  <h2>Gastos Varios</h2>

  <form id="gastos-form">
    <input type="hidden" id="gasto-current-id" name="id">

    <label>Fecha:
      <input type="date" id="gasto-fecha" name="fecha">
    </label>

    <label>Tipo:
      <select id="gasto-tipo" name="tipo">
        <option>Terminal móvil</option><option>ChatGPT Plus</option>
        <option>Electricidad</option><option>Internet</option>
        <option>Seguro coche</option><option>Gasolina</option>
        <option>IBI vivienda</option><option>Comunidad de vecinos</option>
        <option>Otros</option>
      </select>
    </label>

    <!-- --- IVA --- -->
    <fieldset>
      <legend>IVA</legend>

      <label>% IVA:
        <input type="number" step="0.01" id="gasto-iva-pct" name="iva_porcentaje" value="21">
      </label>

      <label>Importe BRUTO (con IVA):
        <input type="number" step="0.01" id="gasto-bruto" name="importe_bruto">
      </label>

      <label>Importe SIN IVA (€):
        <input type="number" step="0.01" id="gasto-neto" readonly>
      </label>

      <label>IVA (€):
        <input type="number" step="0.01" id="gasto-iva-imp" readonly>
      </label>
    </fieldset>

    <!-- deducción -->
    <label>% Deducible:
      <input type="number" step="0.01" id="gasto-porcentaje" name="porcentaje_deducible" value="100">
    </label>

    <label>Importe deducible (€):
      <input type="number" step="0.01" id="gasto-deducible" name="importe_deducible" readonly>
    </label>

    <!-- -------- dividir en 4 ---------- -->
    <label>
      <input type="checkbox" id="gasto-dividir" name="dividir_deduccion">
      Dividir en 4 años
    </label>

    <div id="dividir-info" style="display:none;">
      <label>Importe por año (€):
        <input type="number" step="0.01" id="gasto-dividir-imp" readonly>
      </label>
    </div>

    <label>Nota:
      <textarea id="gasto-nota" name="nota"></textarea>
    </label>

    <button type="submit" id="gasto-submit-btn">Agregar Gasto</button>
    <button type="button" id="gasto-cancel-btn" style="display:none;">Cancelar</button>
  </form>

  <div class="filter">
    <h3>Filtrar</h3>
    <label>Desde:<input type="date" id="gastos-filter-start"></label>
    <label>Hasta:<input type="date" id="gastos-filter-end"></label>
    <button id="gastos-filter-btn">Filtrar</button>
  </div>

  <div id="gastos-results"></div>

  <div class="summary">
    <h3>Total Gastos: <span id="gastos-total">0.00</span> €</h3>
    <button id="gastos-export-btn">Generar Excel</button>
  </div>
</section>
